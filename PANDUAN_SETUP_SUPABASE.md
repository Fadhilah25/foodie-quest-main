# üöÄ PANDUAN LENGKAP SETUP SUPABASE - FOODIE QUEST

Ikuti langkah-langkah ini **SATU PER SATU** dengan teliti.

---

## üìå LANGKAH 1: Buat Akun & Project Supabase

### 1.1 Daftar/Login ke Supabase

1. Buka browser, kunjungi: **https://supabase.com**
2. Klik tombol **"Start your project"** atau **"Sign In"**
3. Login dengan:
   - GitHub account (recommended), atau
   - Email & password
4. Verifikasi email jika diminta

### 1.2 Buat Project Baru

1. Setelah login, klik **"New Project"**
2. Isi form:
   - **Name**: `foodie-quest` (atau nama bebas)
   - **Database Password**: Buat password kuat (SIMPAN password ini!)
   - **Region**: Pilih yang terdekat (contoh: `Southeast Asia (Singapore)`)
   - **Pricing Plan**: Pilih **Free** (cukup untuk tugas ini)
3. Klik **"Create new project"**
4. Tunggu 2-3 menit sampai project selesai dibuat (ada loading indicator)

---

## üìå LANGKAH 2: Ambil Kredensial (URL & Key)

### 2.1 Buka Halaman API Settings

1. Di dashboard project Anda, lihat **sidebar kiri**
2. Klik ikon **Settings** (‚öôÔ∏è gear icon) paling bawah
3. Pilih menu **"API"**

### 2.2 Copy Kredensial

Anda akan melihat 2 informasi penting:

1. **Project URL**

   - Contoh: `https://abcdefghijk.supabase.co`
   - Klik icon **copy** di sebelahnya
   - **SIMPAN di notepad**

2. **anon public key**
   - Ada di bagian "Project API keys"
   - Cari yang bertuliskan **"anon" "public"**
   - Key ini panjang (ratusan karakter)
   - Klik icon **copy**
   - **SIMPAN di notepad**

‚ö†Ô∏è **JANGAN SHARE KEY INI KE ORANG LAIN!**

---

## üìå LANGKAH 3: Setup Database (Buat Tabel)

### 3.1 Buka SQL Editor

1. Di sidebar kiri, klik **"SQL Editor"**
2. Klik **"New query"**

### 3.2 Copy-Paste SQL Ini

Copy SEMUA kode SQL di bawah ini dan paste ke SQL Editor:

```sql
-- 1. Buat Tabel Recipes
CREATE TABLE recipes (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    title TEXT NOT NULL,
    description TEXT,
    ingredients TEXT NOT NULL,
    instructions TEXT NOT NULL,
    image_url TEXT,
    rating NUMERIC DEFAULT 0
);

-- 2. Enable RLS untuk Recipes
ALTER TABLE recipes ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Public recipes are viewable by everyone"
ON recipes FOR SELECT USING (true);

-- 3. Buat Tabel Food Photos
CREATE TABLE food_photos (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    image_url TEXT NOT NULL,
    caption TEXT,
    uploaded_by TEXT DEFAULT 'Anonymous'
);

-- 4. Enable RLS untuk Food Photos
ALTER TABLE food_photos ENABLE ROW LEVEL SECURITY;
CREATE POLICY "Public photos are viewable by everyone"
ON food_photos FOR SELECT USING (true);
CREATE POLICY "Anyone can upload photos"
ON food_photos FOR INSERT WITH CHECK (true);

-- 5. Buat Tabel Favorites
CREATE TABLE favorites (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    recipe_id BIGINT REFERENCES recipes(id) ON DELETE CASCADE
);

-- 6. Insert Sample Data (Resep Contoh)
INSERT INTO recipes (title, description, ingredients, instructions, image_url, rating)
VALUES
('Nasi Goreng Spesial', 'Indonesian fried rice with a twist.', 'Rice, Egg, Sweet Soy Sauce, Garlic, Chili', '1. Fry garlic.
2. Add egg.
3. Add rice and sauces.
4. Serve hot.', 'https://images.unsplash.com/photo-1512058564366-18510be2db19?auto=format&fit=crop&w=800&q=80', 4.8),
('Spaghetti Carbonara', 'Classic Italian pasta.', 'Spaghetti, Eggs, Pecorino Cheese, Guanciale, Black Pepper', '1. Boil pasta.
2. Fry guanciale.
3. Mix eggs and cheese.
4. Combine all off heat.', 'https://images.unsplash.com/photo-1612874742237-6526221588e3?auto=format&fit=crop&w=800&q=80', 4.5),
('Avocado Toast', 'Simple and healthy breakfast.', 'Bread, Avocado, Salt, Pepper, Lemon Juice', '1. Toast bread.
2. Mash avocado.
3. Spread on toast.
4. Season.', 'https://images.unsplash.com/photo-1541519227354-08fa5d50c44d?auto=format&fit=crop&w=800&q=80', 4.2);
```

### 3.3 Jalankan SQL

1. Klik tombol **"Run"** (atau tekan Ctrl+Enter)
2. Tunggu hingga muncul pesan **"Success. No rows returned"**
3. ‚úÖ Database sudah siap!

---

## üìå LANGKAH 4: Setup Storage (Untuk Upload Foto)

### 4.1 Buat Bucket Storage

1. Di sidebar kiri, klik **"Storage"**
2. Klik tombol **"New bucket"**
3. Isi form:
   - **Name**: `food-photos` (HARUS PERSIS seperti ini!)
   - **Public bucket**: ‚úÖ **CENTANG/ON**
4. Klik **"Create bucket"**

### 4.2 Setup Policies untuk Upload

1. Klik bucket **"food-photos"** yang baru dibuat
2. Klik tab **"Policies"** di bagian atas
3. Klik **"New policy"**
4. Pilih **"For full customization"**
5. Isi:
   - **Policy name**: `Allow Public Uploads`
   - **Allowed operation**: Centang **SELECT** dan **INSERT**
   - **Target roles**: Centang **anon** dan **authenticated**
6. Di bagian **"Policy definition"**, paste ini:

```sql
bucket_id = 'food-photos'
```

7. Klik **"Save policy"**
8. ‚úÖ Storage sudah siap!

---

## üìå LANGKAH 5: Hubungkan ke Aplikasi Flutter

### 5.1 Buka File supabase_service.dart

Buka file: `lib/services/supabase_service.dart`

### 5.2 Isi Kredensial

Ganti baris kosong dengan URL dan Key Anda:

**SEBELUM:**

```dart
static const String supabaseUrl = '';
static const String supabaseAnonKey = '';
```

**SESUDAH:** (contoh)

```dart
static const String supabaseUrl = 'https://abcdefghijk.supabase.co';
static const String supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...'; // Key lengkap Anda
```

‚ö†Ô∏è **PENTING**: Masukkan dalam tanda kutip `' '`

### 5.3 Save File

- Tekan **Ctrl + S** untuk save

---

## üìå LANGKAH 6: Test Aplikasi

### 6.1 Jalankan Aplikasi

Di terminal, jalankan:

```bash
flutter run
```

### 6.2 Pilih Device

- Pilih Chrome, Android Emulator, atau device fisik

### 6.3 Cek Fitur

‚úÖ Tab **Recipes**: Harus muncul 3 resep contoh
‚úÖ Tab **Photos**: Kosong (normal, belum ada upload)
‚úÖ Klik resep ‚Üí Lihat detail
‚úÖ Klik icon ‚ù§Ô∏è ‚Üí Toggle favorite
‚úÖ Klik tombol + ‚Üí Upload foto

---

## ‚ùì TROUBLESHOOTING

### Problem: "Invalid API key"

- Pastikan Anda copy **anon public** key, bukan service_role key
- Cek tidak ada spasi atau karakter tambahan

### Problem: "No rows returned" saat buka app

- Cek koneksi internet
- Pastikan SQL sudah dijalankan di Langkah 3
- Lihat console untuk error detail

### Problem: "Upload failed"

- Pastikan bucket bernama **food-photos** (dengan dash -)
- Pastikan bucket di-set **Public**
- Pastikan policies sudah dibuat

---

## üéâ SELESAI!

Jika berhasil, Anda akan melihat:

- ‚úÖ List resep muncul
- ‚úÖ Bisa klik dan lihat detail
- ‚úÖ Favorite berfungsi
- ‚úÖ Bisa upload foto

---

## üìù CATATAN UNTUK TUGAS

Setelah selesai, jangan lupa:

1. Screenshot aplikasi yang berjalan
2. Push kode ke GitHub Anda
3. Submit link GitHub ke dosen

**Format commit yang baik:**

```bash
git add .
git commit -m "Complete FoodieQuest with Supabase integration"
git push
```

---

**Butuh bantuan? Tanyakan saja! üòä**
